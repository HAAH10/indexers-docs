<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-data-flow-and-structures/flow/token-balance">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/near-lake-dock/blog/rss.xml" title="Pagoda Indexer Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/near-lake-dock/blog/atom.xml" title="Pagoda Indexer Docs Atom Feed"><title data-rh="true">Token Balance | Pagoda Indexer Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://khorolets.github.io/near-lake-dock/docs/data-flow-and-structures/flow/token-balance"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Token Balance | Pagoda Indexer Docs"><meta data-rh="true" name="description" content="Examples from our RPC are used. If you want to look at information about archival nodes (more than 2 days ago), please use archival prefix in your URL (e.g. https//archival-rpc.mainnet.near.org. Body:"><meta data-rh="true" property="og:description" content="Examples from our RPC are used. If you want to look at information about archival nodes (more than 2 days ago), please use archival prefix in your URL (e.g. https//archival-rpc.mainnet.near.org. Body:"><link data-rh="true" rel="icon" href="/near-lake-dock/img/favicon.png"><link data-rh="true" rel="canonical" href="https://khorolets.github.io/near-lake-dock/docs/data-flow-and-structures/flow/token-balance"><link data-rh="true" rel="alternate" href="https://khorolets.github.io/near-lake-dock/docs/data-flow-and-structures/flow/token-balance" hreflang="en"><link data-rh="true" rel="alternate" href="https://khorolets.github.io/near-lake-dock/docs/data-flow-and-structures/flow/token-balance" hreflang="x-default"><link rel="stylesheet" href="/near-lake-dock/assets/css/styles.b973a83e.css">
<link rel="preload" href="/near-lake-dock/assets/js/runtime~main.ae15edfd.js" as="script">
<link rel="preload" href="/near-lake-dock/assets/js/main.d41a55f0.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><div class="announcementBar_IbjG" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarContent_KsVm">We have released <a target="_blank" rel="noopener noreferrer" href="https://gov.near.org/t/announcement-near-lake-framework-brand-new-word-in-indexer-building-approach/17668">NEAR Lake Framework</a> - a brand new word in indexer building approach</div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/near-lake-dock/"><div class="navbar__logo"><img src="/near-lake-dock/img/logo.svg" alt="Pagoda Indexer Docs" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/near-lake-dock/img/logo_dark.svg" alt="Pagoda Indexer Docs" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Docs</b></a><a class="navbar__item navbar__link navbar__link--active" href="/near-lake-dock/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/near-lake-dock/tutorials/intro">Tutorials</a><a class="navbar__item navbar__link" href="/near-lake-dock/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj menuWithAnnouncementBar_l2a_"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/near-lake-dock/docs/intro">Indexers Doc</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/near-lake-dock/docs/projects/overview">Projects</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/near-lake-dock/docs/data-flow-and-structures/flow/near-data-flow">Data Flow &amp; Structures</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/near-lake-dock/docs/data-flow-and-structures/flow/near-data-flow">Data Flow</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/near-lake-dock/docs/data-flow-and-structures/flow/near-data-flow">NEAR Data Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/near-lake-dock/docs/data-flow-and-structures/flow/token-transfer-flow">Token Transfer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/near-lake-dock/docs/data-flow-and-structures/flow/token-balance">Token Balance</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/near-lake-dock/docs/data-flow-and-structures/structures/toc">Structures</a></div></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/near-lake-dock/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Data Flow &amp; Structures</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Data Flow</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Token Balance</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Token Balance</h1><p>Examples from our <a href="https://docs.near.org/docs/develop/front-end/rpc" target="_blank" rel="noopener noreferrer">RPC</a> are used. If you want to look at information about archival nodes (more than 2 days ago), please use <code>archival</code> prefix in your URL (e.g. <code>https://archival-rpc.mainnet.near.org</code>) In this article, we always use <code>POST</code> methods to the same URL <code>https://archival-rpc.mainnet.near.org</code>. Body:</p><pre tabindex="0" class="prism-code language-text codeBlockStandalone_csWH thin-scrollbar codeBlockContainer_I0IT language-null theme-code-block" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA">{<br>  <span class="hljs-string">&quot;jsonrpc&quot;</span>: <span class="hljs-string">&quot;2.0&quot;</span>,<br>  <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;dontcare&quot;</span>,<br>  <span class="hljs-string">&quot;method&quot;</span>: <span class="hljs-string">&quot;EXPERIMENTAL_tx_status&quot;</span>,<br>  <span class="hljs-string">&quot;params&quot;</span>: [<span class="hljs-string">&quot;8uxq5BAC4zZL4Set7gtraqZSWduYXRUiNggpKhWmBnzK&quot;</span>, <span class="hljs-string">&quot;nf-finance.near&quot;</span>]<br>}</code></pre><p>Every <a href="https://docs.near.org/docs/develop/front-end/rpc#view-account" target="_blank" rel="noopener noreferrer">account</a> has liquid balance (called <code>amount</code>) and stake (called <code>locked</code>). All calculation in tables are in yoctonear.</p><p>Total supply is the amount of tokens in the whole system. Each example is selected at the moment when no other changes is performed in the blockchain, so the only example could affect total supply.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="why-does-my-balance-change">Why does my balance change?<a class="hash-link" href="#why-does-my-balance-change" title="Direct link to heading">​</a></h2><p>There are different scenarios why the amount of tokens could change on the account. Let&#x27;s look at it on real examples.</p><p>Each example (except rewarding) contains fees user pays for the operation. You could read about fees calculation <a href="https://nomicon.io/Economics/README.html#transaction-fees" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="transfer-of-tokens">Transfer of tokens<a class="hash-link" href="#transfer-of-tokens" title="Direct link to heading">​</a></h3><p><a href="https://explorer.mainnet.near.org/transactions/6gUVYsdAsStzU5H2AyW7bxAdEL4RvJv5PL3b8DRnPVED" target="_blank" rel="noopener noreferrer">https://explorer.mainnet.near.org/transactions/6gUVYsdAsStzU5H2AyW7bxAdEL4RvJv5PL3b8DRnPVED</a></p><p><code>pine.near</code> sent 1.64234 tokens to <code>taka.near</code></p><table><thead><tr><th>block height</th><th>pine.near amount</th><th>taka.near amount</th><th>total supply</th><th>explanation</th></tr></thead><tbody><tr><td>32786820</td><td>1997461904089428600000000</td><td>17799799178272291100000000</td><td>1020393325841554327182410255742095</td><td>initial state</td></tr><tr><td>32786821</td><td>355076598029241100000000</td><td>17799799178272291100000000</td><td>1020393325841554327182410255742095</td><td>pine.near lost some tokens for transferring and fees (with a margin, some tokens will be returned)</td></tr><tr><td>32786822</td><td>355076598029241100000000</td><td>19442139178272291100000000</td><td>1020393325841532008926160255742095</td><td>taka.near received exactly 1.64234 tokens. Total supply was deducted for making receipt from transaction</td></tr><tr><td>32786823</td><td>355077267576928600000000</td><td>19442139178272291100000000</td><td>1020393325841509690669910255742095</td><td>pine.near received a change. Total supply was deducted for executing receipt</td></tr><tr><td>32786824</td><td>355077267576928600000000</td><td>19442139178272291100000000</td><td>1020393325841509690669910255742095</td><td>final state</td></tr></tbody></table><p>For such kind of transactions, sender pays 2 fees: for making receipt from transaction; for executing receipt.</p><p>We also have receipt for returning a change: it is made without fee.</p><p>For this example, final cost of transferring tokens was <code>22318256250000000000 * 2 / 10^24 = 0.0000446365125</code> Near Tokens.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="creating-the-account">Creating the account<a class="hash-link" href="#creating-the-account" title="Direct link to heading">​</a></h3><p><a href="https://explorer.mainnet.near.org/transactions/Hant2anxPJHm3sh8ncc5AWn5VpXTmwq6iyEumVoQcUJP" target="_blank" rel="noopener noreferrer">https://explorer.mainnet.near.org/transactions/Hant2anxPJHm3sh8ncc5AWn5VpXTmwq6iyEumVoQcUJP</a></p><p><code>nearcrowd.near</code> created account <code>app.nearcrowd.near</code>, gave the access key, transfer some tokens for that account. These 3 actions are usually go together.</p><table><thead><tr><th>block height</th><th>nearcrowd.near amount</th><th>app.nearcrowd.near amount</th><th>total supply</th><th>explanation</th></tr></thead><tbody><tr><td>32396638</td><td>117975002547050142700000000</td><td>-</td><td>1019767988635277999737307820909366</td><td>initial state (app.nearcrowd.near does not exist)</td></tr><tr><td>32396639</td><td>17974916362372455200000000</td><td>-</td><td>1019767988635277999737307820909366</td><td>nearcrowd.near spent tokens on transfer and fees (with a margin, some tokens will be returned). Total supply is not changed for now: process is not finished</td></tr><tr><td>32396640</td><td>17974916362372455200000000</td><td>100000000000000000000000000</td><td>1019767988635235544231057820909366</td><td>app.nearcrowd.near was created with initial amount of tokens. Total supply was deducted for making receipt from transaction</td></tr><tr><td>32396641</td><td>17974917636037642700000000</td><td>100000000000000000000000000</td><td>1019767988635193088724807820909366</td><td>nearcrowd.near received a change. Total supply was deducted for executing receipt</td></tr><tr><td>32396642</td><td>17974917636037642700000000</td><td>100000000000000000000000000</td><td>1019767988635193088724807820909366</td><td>final state</td></tr></tbody></table><p>For such kind of transactions, sender pays 2 fees: for making receipt from transaction; for executing receipt.</p><p>We also have receipt for returning a change: it is made without fee. For this example, final cost of creating account and transferring tokens were <code>42455506250000000000 * 2 / 10^24 = 0.0000849110125</code> Near Tokens.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="deleting-the-account">Deleting the account<a class="hash-link" href="#deleting-the-account" title="Direct link to heading">​</a></h3><p><a href="https://explorer.mainnet.near.org/transactions/8nZeedU6RUnj65zxQYHrGx2Urx5sLe6J2T123xSNL2RK" target="_blank" rel="noopener noreferrer">https://explorer.mainnet.near.org/transactions/8nZeedU6RUnj65zxQYHrGx2Urx5sLe6J2T123xSNL2RK</a></p><p>It&#x27;s not possible to delete not your account: user is always deleting their own account. User should provide beneficiary account that receive all tokens. User could provide the account that does not exist, in such case the tokens will burn.</p><p><code>wxx.near</code> deleted their account with beneficiary <code>vng.near</code></p><table><thead><tr><th>block height</th><th>wxx.near amount</th><th>vng.near amount</th><th>total supply</th><th>explanation</th></tr></thead><tbody><tr><td>31961454</td><td>456172376354355113240646</td><td>719560525627200400000000</td><td>1019079411898934110106918776083373</td><td>initial state</td></tr><tr><td>31961455</td><td>-</td><td>719560525627200400000000</td><td>1019079411898934110106918776083373</td><td>wxx.near was deleted</td></tr><tr><td>31961456</td><td>-</td><td>1175681792281555513240646</td><td>1019079411898883000406918776083373</td><td>vng.near received tokens (minus fee), total supply was deducted by fees getting burned</td></tr><tr><td>31961457</td><td>-</td><td>1175681792281555513240646</td><td>1019079411898883000406918776083373</td><td>final state</td></tr></tbody></table><p>For such kind of transactions, sender pays 2 fees: for making receipt from transaction; for executing receipt.</p><p>Note: we do not have the change. For this example, final cost of deleting account was <code>25554850000000000000 * 2 / 10^24 = 0.0000511097</code> Near Tokens.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="calling-a-function">Calling a function<a class="hash-link" href="#calling-a-function" title="Direct link to heading">​</a></h3><p><a href="https://explorer.mainnet.near.org/transactions/8oBZrKk8jkAzrsYasoL2DW9Yg6K2GznLhvoiXmSm7kHe" target="_blank" rel="noopener noreferrer">https://explorer.mainnet.near.org/transactions/8oBZrKk8jkAzrsYasoL2DW9Yg6K2GznLhvoiXmSm7kHe</a></p><p><code>relayer.bridge.near</code> invoked a function in the contract of <code>client.bridge.near</code></p><table><thead><tr><th>block height</th><th>relayer.bridge.near amount</th><th>client.bridge.near amount</th><th>total supply</th><th>explanation</th></tr></thead><tbody><tr><td>32451005</td><td>927695372457390994900000000</td><td>1018709186646522709500000000</td><td>1019836940956022237114094657887001</td><td>initial state</td></tr><tr><td>32451006</td><td>927676238135400182753029324</td><td>1018709186646522709500000000</td><td>1019836940956022237114094657887001</td><td>the function is invoked, relayer.bridge.near spent the tokens on the fees (with a margin)</td></tr><tr><td>32451007</td><td>927676238135400182753029324</td><td>1018710176966066945800000000</td><td>1019836940955771421812122457887001</td><td>author of the function gets the reward. Total supply was deducted for making receipt from transaction</td></tr><tr><td>32451008</td><td>927691569761639596000000000</td><td>1018710176966066945800000000</td><td>1019836940953209860906932057887001</td><td>relayer.bridge.near received a change for fees. Total supply was deducted for executing receipt</td></tr><tr><td>32451009</td><td>927691569761639596000000000</td><td>1018710176966066945800000000</td><td>1019836940953209860906932057887001</td><td>final state</td></tr></tbody></table><p>For such kind of transactions, sender pays 2 fees: for making receipt from transaction; for executing receipt. Receiver gets part of the fee as a reward for a possibility to invoke their function.</p><p>For this example, final cost of invoking the function was <code>(250815301972200000000 + 3551880449426700000000) / 10^24 = 0.0038026957513989</code> Near Tokens. Reward was <code>0.0009903195442363</code> Near Tokens.</p><p>TODO: add Nomicon link about royalties when <a href="https://github.com/near/NEPs/issues/198" target="_blank" rel="noopener noreferrer">this issue</a> will be resolved.</p><p><strong>The example of calling a function could be more complex.</strong></p><p><a href="https://explorer.mainnet.near.org/transactions/DuGWWTK2sAxjffifJiJBv6hs3Hc8MdhpHnzgRJryV4Be" target="_blank" rel="noopener noreferrer">https://explorer.mainnet.near.org/transactions/DuGWWTK2sAxjffifJiJBv6hs3Hc8MdhpHnzgRJryV4Be</a></p><p><code>lulukuang.near</code> invokes a function in a protocol of <code>berryclub.ek.near</code>. It triggers <code>berryclub.ek.near</code> to send the money to third account, <code>farm.berryclub.ek.near</code>. So we need to analyze 3 accounts in this scenario.</p><table><thead><tr><th>block height</th><th>lulukuang.near amount</th><th>berryclub.ek.near amount</th><th>farm.berryclub.ek.near amount</th><th>total supply</th></tr></thead><tbody><tr><td>32448898</td><td>13565822561282329011544599</td><td>468266310630308773724199697</td><td>1795104370794561556009708395</td><td>1019836941925593000345074757887001</td></tr><tr><td>32448899</td><td>13553154814244264373824919</td><td>468266310630308773724199697</td><td>1795104370794561556009708395</td><td>1019836941925593000345074757887001</td></tr><tr><td>32448900</td><td>13553154814244264373824919</td><td>468011594500695874498002337</td><td>1795104370794561556009708395</td><td>1019836941925350190357602757887001</td></tr><tr><td>32448901</td><td>13563348945268324922643655</td><td>468011594500695874498002337</td><td>1795359347718068910135905755</td><td>1019836941924550160945561757887001</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_mojV" id="adding-the-key">Adding the key<a class="hash-link" href="#adding-the-key" title="Direct link to heading">​</a></h3><p><a href="https://explorer.mainnet.near.org/transactions/A9767GbmRCLdeCpZYfKTQUqe17KyAu5JrZHanoRChMSV" target="_blank" rel="noopener noreferrer">https://explorer.mainnet.near.org/transactions/A9767GbmRCLdeCpZYfKTQUqe17KyAu5JrZHanoRChMSV</a></p><p><code>slavon.near</code> added the key to their own account.</p><table><thead><tr><th>block height</th><th>slavon.near amount</th><th>total supply</th><th>explanation</th></tr></thead><tbody><tr><td>32452281</td><td>4110095852838015413724607</td><td>1019836940258537920949718457887001</td><td>initial state</td></tr><tr><td>32452282</td><td>4110053774694109613724607</td><td>1019836940258537920949718457887001</td><td>fees are gone</td></tr><tr><td>32452283</td><td>4110053774694109613724607</td><td>1019836940258495842805812657887001</td><td>total supply was deducted</td></tr><tr><td>32452284</td><td>4110053774694109613724607</td><td>1019836940258495842805812657887001</td><td>final state</td></tr></tbody></table><p>For such kind of transactions, sender pays 2 fees: for making receipt from transaction; for executing receipt.</p><p>Note: we do not have the change. For this example, final cost of adding the key was <code>21039071952900000000 * 2 / 10^24 = 0.0000420781439058</code> Near Tokens.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="deleting-the-key">Deleting the key<a class="hash-link" href="#deleting-the-key" title="Direct link to heading">​</a></h3><p><a href="https://explorer.mainnet.near.org/transactions/CfuXcVPy7vZNVabYKzemSwDdNF9fnhbMLaaDKjAMyw8j" target="_blank" rel="noopener noreferrer">https://explorer.mainnet.near.org/transactions/CfuXcVPy7vZNVabYKzemSwDdNF9fnhbMLaaDKjAMyw8j</a></p><p><code>77yen.near</code> deleted the key from their own account.</p><table><thead><tr><th>block height</th><th>77yen.near amount</th><th>total supply</th><th>explanation</th></tr></thead><tbody><tr><td>32429428</td><td>350892032360972200000000</td><td>1019836950055687104230777157887001</td><td>initial state</td></tr><tr><td>32429429</td><td>350851431135972200000000</td><td>1019836950055687104230777157887001</td><td>fees are gone</td></tr><tr><td>32429430</td><td>350851431135972200000000</td><td>1019836950055646503005777157887001</td><td>total supply was deducted</td></tr><tr><td>32429431</td><td>350851431135972200000000</td><td>1019836950055646503005777157887001</td><td>final state</td></tr></tbody></table><p>For such kind of transactions, sender pays 2 fees: for making receipt from transaction; for executing receipt.</p><p>Note: we do not have the change. For this example, final cost of adding the key was <code>20300612500000000000 * 2 / 10^24 = 0.000040601225</code> Near Tokens.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="deploying-the-contract">Deploying the contract<a class="hash-link" href="#deploying-the-contract" title="Direct link to heading">​</a></h3><p><a href="https://explorer.mainnet.near.org/transactions/3DN4XiQCX2EeSN5sjiaB4WBjJizthbhUfqQhCBcZK57A" target="_blank" rel="noopener noreferrer">https://explorer.mainnet.near.org/transactions/3DN4XiQCX2EeSN5sjiaB4WBjJizthbhUfqQhCBcZK57A</a></p><p><code>ref-finance.near</code> deployed the contract.</p><table><thead><tr><th>block height</th><th>ref-finance.near amount</th><th>total supply</th><th>explanation</th></tr></thead><tbody><tr><td>32378845</td><td>42166443062029468200000000</td><td>1019767995481527182962669020909366</td><td>initial state</td></tr><tr><td>32378846</td><td>42165929455413658400000000</td><td>1019767995481527182962669020909366</td><td>fees are gone</td></tr><tr><td>32378847</td><td>42165929455413658400000000</td><td>1019767995481013576346859220909366</td><td>total supply was deducted</td></tr><tr><td>32378848</td><td>42165929455413658400000000</td><td>1019767995481013576346859220909366</td><td>final state</td></tr></tbody></table><p>For such kind of transactions, sender pays 2 fees: for making receipt from transaction; for executing receipt.</p><p>Note: we do not have the change. For this example, final cost of deploying the contract was <code>256803307904900000000 * 2 / 10^24 = 0.0005136066158098</code> Near Tokens.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="receiving-the-reward-for-being-validator">Receiving the reward for being validator<a class="hash-link" href="#receiving-the-reward-for-being-validator" title="Direct link to heading">​</a></h3><p>NB: No transaction/receipt is associated with such type of balance changing.</p><p>On the boundary of the epochs, validators receive reward. The platform gives 10% of minted tokens to special account <code>treasury.near</code>. You could think about <code>treasury.near</code> as about reward to the whole system to keep it in working order. Total sum of the rewards (including <code>treasury.near</code>) is the increase of total supply in the system.</p><table><thead><tr><th></th><th>total supply</th><th>treasury.near</th><th>comment</th></tr></thead><tbody><tr><td>block 32716252</td><td>1020253586314335829144818854680815</td><td>2047777174062240806436499682917</td><td></td></tr><tr><td>block 32716253</td><td>1020323466696960098722157540903707</td><td>2054765212324667764170368305209</td><td></td></tr><tr><td>difference</td><td>69880382624269577338686222892</td><td>6988038262426957733868622292</td><td>treasury received 10% of reward</td></tr></tbody></table><p>If the validator does not change the stake during the epoch, all the reward will go to their stake. Liquid balance will remain the same.</p><table><thead><tr><th>block height</th><th>baziliknear.poolv1.near amount</th><th>baziliknear.poolv1.near locked (stake)</th></tr></thead><tbody><tr><td>32716252</td><td>87645929417382101548688640817</td><td>4051739369484142981303684413288</td></tr><tr><td>32716253</td><td>87645929417382101548688640817</td><td>4052372556336355400023161624996</td></tr></tbody></table><p><code>baziliknear.poolv1.near</code> had 4M tokens on their locked balance. Their reward for the epoch was <code>633186852212418719477211708 / 10^24 = 633.1868522124187</code> tokens.</p><p>If the validator decrease the stake during the epoch, it will be actually decreased at the boundary between the epochs. The reward will also go to the liquid balance in such case.</p><table><thead><tr><th>block height</th><th>astro-stakers.poolv1.near amount</th><th>astro-stakers.poolv1.near locked (stake)</th><th>d1.poolv1.near amount</th><th>d1.poolv1.near locked (stake)</th><th>artemis.poolv1.near amount</th><th>artemis.poolv1.near locked (stake)</th></tr></thead><tbody><tr><td>block 32716252</td><td>75643656264518222662518079298</td><td>14871875685703104705137979278533</td><td>39579636061549418675704317463</td><td>9002215926886116642974675441492</td><td>195455191635613196116221250</td><td>3155647821138218410536743286795</td></tr><tr><td>block 32716253</td><td>77968865959341187332341390150</td><td>14871875685703104705137979278533</td><td>40986873900034981089977167653</td><td>9002215926314400176270075441492</td><td>3155843276329854023732859508045</td><td>0</td></tr><tr><td>diff</td><td>2325209694822964669823310852</td><td>0</td><td>1407237838485562414272850190</td><td>-571716466704600000000</td><td>3155647821138218410536743286795</td><td>-3155647821138218410536743286795</td></tr></tbody></table><p><code>astro-stakers.poolv1.near</code> decided to put the reward to liquid balance, so they invoked a command (e.g. <code>ping</code>). We can see that the stake does not change between the epochs.</p><p><code>d1.poolv1.near</code> decided to slightly decrease the stake size, so the reward and the part of the stake are on the liquid balance.</p><p><code>artemis.poolv1.near</code> received the reward and stopped being validator at that epoch, so all the stake are on the liquid balance, stake becomes zero.</p><p>The reword value is calculated based on stake size and number of calculated blocks per epoch. Read more about it <a href="https://nomicon.io/Economics/README.html#rewards-calculation" target="_blank" rel="noopener noreferrer">here</a></p><p>If the validator increase the stake during the epoch, stake will be increased in next few blocks, we do not need to wait for the moment of the epoch boundary. For current epoch, blockchain will take into account stake value fixed at the start of the epoch.</p><p><a href="https://explorer.mainnet.near.org/transactions/HajXjY1gSf47jakXP44ERecjFE2hFvF4FgRyQzNdZzDZ" target="_blank" rel="noopener noreferrer">https://explorer.mainnet.near.org/transactions/HajXjY1gSf47jakXP44ERecjFE2hFvF4FgRyQzNdZzDZ</a></p><p><code>elecnodo.near</code> put 245.7788678019393 tokens from its locked account <code>57bea511f28a9c0d44148c332826a9b9fb14f13c.lockup.near</code> to a staking pool <code>staked.poolv1.near</code></p><p>Read more about epochs changing <a href="https://github.com/near/NEPs/tree/master/specs/BlockchainLayer/EpochManager" target="_blank" rel="noopener noreferrer">here</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/data-flow-and-structures/flow/token-balance.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/near-lake-dock/docs/data-flow-and-structures/flow/token-transfer-flow"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Token Transfer</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/near-lake-dock/docs/data-flow-and-structures/structures/toc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Table of contents</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-does-my-balance-change" class="table-of-contents__link toc-highlight">Why does my balance change?</a><ul><li><a href="#transfer-of-tokens" class="table-of-contents__link toc-highlight">Transfer of tokens</a></li><li><a href="#creating-the-account" class="table-of-contents__link toc-highlight">Creating the account</a></li><li><a href="#deleting-the-account" class="table-of-contents__link toc-highlight">Deleting the account</a></li><li><a href="#calling-a-function" class="table-of-contents__link toc-highlight">Calling a function</a></li><li><a href="#adding-the-key" class="table-of-contents__link toc-highlight">Adding the key</a></li><li><a href="#deleting-the-key" class="table-of-contents__link toc-highlight">Deleting the key</a></li><li><a href="#deploying-the-contract" class="table-of-contents__link toc-highlight">Deploying the contract</a></li><li><a href="#receiving-the-reward-for-being-validator" class="table-of-contents__link toc-highlight">Receiving the reward for being validator</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/near-lake-dock/docs/intro">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/near-lake-dock/tutorials/intro">Tutorials</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/nearprotocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/near-lake-dock/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Pagoda, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/near-lake-dock/assets/js/runtime~main.ae15edfd.js"></script>
<script src="/near-lake-dock/assets/js/main.d41a55f0.js"></script>
</body>
</html>