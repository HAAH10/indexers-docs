"use strict";(self.webpackChunknear_lake_dock=self.webpackChunknear_lake_dock||[]).push([[7351],{3905:function(e,t,a){a.d(t,{Zo:function(){return l},kt:function(){return h}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=n.createContext({}),c=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):A(A({},t),e)),a},l=function(e){var t=c(e.components);return n.createElement(i.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),u=c(a),h=r,p=u["".concat(i,".").concat(h)]||u[h]||d[h]||o;return a?n.createElement(p,A(A({ref:t},l),{},{components:a})):n.createElement(p,A({ref:t},l))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,A=new Array(o);A[0]=u;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:r,A[1]=s;for(var c=2;c<o;c++)A[c]=a[c];return n.createElement.apply(null,A)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},1637:function(e,t,a){a.r(t),a.d(t,{assets:function(){return l},contentTitle:function(){return i},default:function(){return h},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return d}});var n=a(7462),r=a(3366),o=(a(7294),a(3905)),A=["components"],s={sidebar_position:1},i="NEAR Data Flow",c={unversionedId:"data-flow-and-structures/flow/near-data-flow",id:"data-flow-and-structures/flow/near-data-flow",title:"NEAR Data Flow",description:"Video explanation",source:"@site/docs/data-flow-and-structures/flow/near-data-flow.mdx",sourceDirName:"data-flow-and-structures/flow",slug:"/data-flow-and-structures/flow/near-data-flow",permalink:"/near-lake-dock/docs/data-flow-and-structures/flow/near-data-flow",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/data-flow-and-structures/flow/near-data-flow.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"AccountId",permalink:"/near-lake-dock/docs/data-flow-and-structures/structures/account_id"},next:{title:"Token Balance",permalink:"/near-lake-dock/docs/data-flow-and-structures/flow/token-balance"}},l={},d=[{value:"Video explanation",id:"video-explanation",level:2},{value:"Text version",id:"text-version",level:2},{value:"Summary",id:"summary",level:2}],u={toc:d};function h(e){var t=e.components,s=(0,r.Z)(e,A);return(0,o.kt)("wrapper",(0,n.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"near-data-flow"},"NEAR Data Flow"),(0,o.kt)("h2",{id:"video-explanation"},"Video explanation"),(0,o.kt)("p",null,"In the video below we have tried to give a quick overview on main concept of how the data is flowing in NEAR Protocol blockchain. You will find a text version below the video."),(0,o.kt)("p",null,"VIDEO"),(0,o.kt)("h2",{id:"text-version"},"Text version"),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Text version")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Text version doesn't replace the video. However, we've extended some explanaitions."))),(0,o.kt)("p",null,"NEAR Protocol blockchain data flow might be a bit tricky at a glance. But it is pretty straightforward and follows well-defined rules. In this article, we are going to have a closer look at how the data flows in NEAR Protocol blockchain."),(0,o.kt)("p",null,"In fact, any blockchain flow can be represented as an infinity timeline that has a start but has no end."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Blocks Timeline",src:a(3580).Z,width:"1305",height:"102"})),(0,o.kt)("p",null,"And a block appears on that timeline with some interval. Each of these blocks holds the information about the previous one, thus, creating a ",(0,o.kt)("em",{parentName:"p"},"chain of blocks"),"."),(0,o.kt)("p",null,"NEAR Protocol has a sharded nature, meaning that more than one parallel network, called a ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/shard"},"Shard"),", can be live at any moment. And each Shard produces a chunk of a block at a given interval. A Block in NEAR Blockchain is a collection of the block chunks from all shards. Block chunk is shortened to ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/chunk"},"Chunk")," in NEAR Protocol documentation."),(0,o.kt)("p",null,"Returning to the data flow itself. The best we can do is to imagine tracks like we could see in audio/video editing apps. Each Shard has its own set of tracks. The top track is for Chunks. They appear no matter what at a given interval, for NEAR Blockchain the interval is about one second. Chunks are being produced even if nothing is happening on the blockchain."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Timeline as tracks",src:a(8076).Z,width:"1449",height:"700"})),(0,o.kt)("p",null,"But what do we mean by saying something is happening? We mean that something has triggered some changes in the blockchain. And the most well known method to trigger any changes is to send a ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/transaction"},"Transaction")," to the blockchain with instructions of what we want to change and who has requested those changes."),(0,o.kt)("p",null,"A transaction needs to be constructed, signed and sent to the blockchain. Once it is executed we expect to have a result - ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/execution_outcome"},"ExecutionOutcome"),". Oh, that is simple. But it\u2019s not really accurate for NEAR Blockchain."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Transaction execution",src:a(6385).Z,width:"1449",height:"700"})),(0,o.kt)("p",null,"In the beginning there is a ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/transaction"},"Transaction"),", it contains instructions we want to be executed on the blockchain. Transaction is sent to NEAR Blockchain."),(0,o.kt)("p",null,"And yes, it is executed there immediately BUT the immediate result of the transaction execution is always just ",(0,o.kt)("em",{parentName:"p"},"an acknowledgement that it will be executed on the chain;")," this internal execution request is known as ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/receipt"},"Receipt"),". You can think of the ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/receipt"},"Receipt")," as an internal transaction that exists to pass information across shards."),(0,o.kt)("p",null,"Let\u2019s get back to the tracks to look at the example."),(0,o.kt)("p",null,"Assuming we have two accounts living on different ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/shard"},"Shards")," ",(0,o.kt)("strong",{parentName:"p"},"alice.near")," and ",(0,o.kt)("strong",{parentName:"p"},"bob.near"),". ",(0,o.kt)("strong",{parentName:"p"},"alice.near")," creates a ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/transaction"},"Transaction")," to send a few tokens to ",(0,o.kt)("strong",{parentName:"p"},"bob.near"),". The ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/transaction"},"Transaction")," is immediately executed and the ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/execution_outcome"},"ExecutionOutcome")," for the ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/transaction"},"Transaction")," is always a ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/receipt"},"Receipt"),"."),(0,o.kt)("p",null,"But this ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/receipt"},"Receipt")," cannot be executed here, because ",(0,o.kt)("strong",{parentName:"p"},"bob.near")," doesn\u2019t live on the same Shard as ",(0,o.kt)("strong",{parentName:"p"},"alice.near"),", so ",(0,o.kt)("strong",{parentName:"p"},"the Receipt must be executed on the receiver\u2019s Shard"),". So the Receipt is moving to the Shard where ",(0,o.kt)("strong",{parentName:"p"},"bob.near")," belongs to."),(0,o.kt)("p",null,"On the destination Shard the Receipt is executed and the result of ",(0,o.kt)("strong",{parentName:"p"},"ExecutionOutcome")," will be another Receipt with the ",(0,o.kt)("em",{parentName:"p"},"refund"),"."),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Gas and Refunds")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Quick recap. A blockchain is a decentralized network of computers that perform calculations by request. Users who request any calculations send Transactions to the network. In order to reward those computers owners users pay for Transactions, that paymans is called Gas."),(0,o.kt)("p",{parentName:"div"},"Along with Transactions sent to the network users attach Gas to cover the reward. NEAR Protocol allows to attach more than enough Gas amount to the Transaction and get the refund. NEAR Protocol will take only the necessary amount of Gas and will refund the rest to the sender."))),(0,o.kt)("p",null,"So the final scheme will look like:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Complete scheme of sending tokens from an account from one Shard to an account on another",src:a(3166).Z,width:"1449",height:"700"})),(0,o.kt)("h2",{id:"summary"},"Summary"),(0,o.kt)("p",null,"We have learnt the main principles of how data is flowing in NEAR Protocol. We have found out that ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/transaction"},"Transactions")," execute and the ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/execution_outcome"},"ExecutionOutcome")," of the Transaction is always a ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/receipt"},"Receipt"),"."),(0,o.kt)("p",null,"Now we know that ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/receipt"},"Receipt")," is a main internal asset for NEAR Protocol blockchain and it has a power of traveling between ",(0,o.kt)("a",{parentName:"p",href:"/near-lake-dock/docs/data-flow-and-structures/structures/shard"},"Shards"),". We learnt the NEAR Data flow on a simple example. Of course in real life with more complex transactions, that involve cross-contract calls, there will be more Receipts and ExecutionOutcomes."),(0,o.kt)("p",null,"We hope this article is useful and you will be able to build your dApps and indexers easily with the knowledge of how data if flowing in NEAR Protocol."))}h.isMDXComponent=!0},3580:function(e,t){t.Z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABRkAAABmCAYAAABPypY1AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAVcSURBVHgB7d3RTSpbGIbhNWYXQAdKB5agFUgHYAXQAVgBdIBWQgmWgCXYAcdFYnKinjk7/iPM/D5PsrMTLrz7bt6staY5vCkAAAAAAN90UQAAAAAAAkRGAAAAACBEZAQAAAAAQkRGAAAAACBEZAQAAAAAQkRGAAAAACBEZAQAAAAAQkRGAAAAACBEZAQAAAAAQkRGAAAAACBEZAQAAAAAQkRGAAAAACBEZAQAAAAAQkRGAAAAACBEZAQAAAAAQkRGAAAAACBEZAQAAAAAQkRGAAAAACBEZAQAAAAAQkRGAAAAACBEZAQAAAAAQkRGAAAAACBEZAQAAAAAQkRGAAAAACBEZAQAAAAAQkRGAAAAACDkTwlomubTb4fDoQB52DnkZ+eQn51DfnYOnJuTjAAAAABAiMgIAAAAAISIjAAAAABAiMgIAAAAAISIjAAAAABAiMgIAAAAAD3w8vJShkpkBAAAAIAeuL29LQ8PD2WImsOb8k1N03z6LfDngB6yc8jPziE/O4f87BxyeN/y1dVVWa1WZTqdlqFwkhEAAAAAeqRem57NZuX+/n4wV6hFRgAAAADoocfHxzIejwcRG0VGAAAAAOixGhvre41PT0+lr7zJCLSyc8jPziE/O4f87Bxy+GrLH9X3GjebTbm7uyt94iQjAAAAAAxEvTY9mUx6d4XaSUaglZ1DfnYO+dk55GfnkMPfnGT8qH6Fej6fl9FoVM5JZARa2TnkZ+eQn51DfnYOOXwnMlb1CnWNjdPptJyLyAi0snPIz84hPzuH/OwccvhuZHxXY+Nutzv+f2reZAQAAACABOobjePx+CzvNTrJCLSyc8jPziE/O4f87BxyiJ5k/Lf6RuNisSjL5bKcgsgItLJzyM/OIT87h/zsHHLoMjK+O9V7jSIj0MrOIT87h/zsHPKzc8jhJyLju5ubm7Ldbn/svcbOIyMAAAAA0E+z2ex4hbrr2CgyAgAAAMAvUgNjfa9xPp+XroiMAAAAAPALdfle40UBAAAAAH6ly8vL0gWREQAAAAB+kdFodHyXcb/fHz8I04U/BQAAAAD4Feo7jPWKdA2NXeo8MgaeeAR66Ku3V+0ccrFzyM/OIT87hxx+8vsn9cRiPb3Y1cnFj5xkBAAAAICk6sdd1ut1mUwm5SeJjAAAAACQTL0OXa9GLxaLzq9Gf0VkBAAAAIBEZrPZ8Wp0PcV4KiIjAAAAACTw0+8uthEZAQAAAGDA6nXozWZTptNpOReREQAAAAAG6NTvLrYRGQEAAABgYOqV6O12e9J3F9tcFAAAAABgEK6vr8tutzv+60tgrERGAAAAAOi5eh16vV6X5+fns3zY5f+4Lg0AAAAAPVbfXVytVmd/d7GNyAgAAAAAPdS3dxfbiIwAAAAA0CM1Kta42Mdr0f/Fm4wAAAAA0AP1OvRyuSz7/X5QgbFqDm/KNzVN8+m3wJ8DesjOIT87h/zsHPKzc8jh9fW11+8uthEZgVZ2DvnZOeRn55CfnQPn5ro0AAAAABAiMgIAAAAAISIjAAAAABAiMgIAAAAAIaEPvwAAAAAAOMkIAAAAAISIjAAAAABAiMgIAAAAAISIjAAAAABAiMgIAAAAAISIjAAAAABAiMgIAAAAAISIjAAAAABAiMgIAAAAAISIjAAAAABAiMgIAAAAAISIjAAAAABAiMgIAAAAAISIjAAAAABAiMgIAAAAAISIjAAAAABAiMgIAAAAAISIjAAAAABAiMgIAAAAAISIjAAAAABAiMgIAAAAAISIjAAAAABAiMgIAAAAAISIjAAAAABAiMgIAAAAAISIjAAAAABAiMgIAAAAAIT8AyjHcnpE9QN/AAAAAElFTkSuQmCC"},8076:function(e,t,a){t.Z=a.p+"assets/images/02-tracks-77291d208a9024d169bd768131af3bee.png"},6385:function(e,t,a){t.Z=a.p+"assets/images/03-tx-outcome-receipt-0fcb113623aa8f546f29cd413b47a7db.png"},3166:function(e,t,a){t.Z=a.p+"assets/images/04-send-nears-flow-e0a963343b23df8727a04d0b1cb5184a.png"}}]);